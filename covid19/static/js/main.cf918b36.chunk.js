(this.webpackJsonpworker=this.webpackJsonpworker||[]).push([[0],{11:function(e,t,a){e.exports=a(21)},16:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),s=(a(16),a(1)),l=a(2),i=a.n(l),u=a(5),m={version:3,id:"e7aea5cc-e223-4c85-8212-b8ba319bf9d0",address:"96aff0879a2679a4a35b6172fa9d583e95b794af",crypto:{ciphertext:"a3c815aa7cfbddd6ccf37f0f87db5ce09014e26bbaf63d3aa0b516757eb10627",cipherparams:{iv:"f396d229b9c7678e4c0121bf848b6379"},cipher:"aes-128-ctr",kdf:"scrypt",kdfparams:{dklen:32,salt:"31ea91102a4534df50a735f15aceb12b429755b108afbd46ef2b1f8f9682c449",n:1024,r:8,p:1},mac:"9d5506e9e3ed4773263afc457657f951bcb6667176a6870dd151c3e831c98bd8"},label:"covid19-demo-worker-keystore",flags:0,developer:0},d=a(8),p=new(a.n(d).a),f=function(e){var t=e.updateStatus,a=Object(n.useState)(!1),o=Object(s.a)(a,2),c=o[0],l=o[1];Object(n.useEffect)((function(){var e=function(){l(!0)},t=function(){l(!1)};return window.dcp.compute.supervisor.on("start",e),window.dcp.compute.supervisor.on("stop",t),function(){window.dcp.compute.supervisor.off("start",e),window.dcp.compute.supervisor.off("stop",t)}}),[l]);var d=Object(n.useCallback)(Object(u.a)(i.a.mark((function e(){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(a=!c),n=document.getElementById("fighters-count"),!a){e.next=15;break}return e.next=6,new window.dcp.wallet.Keystore(m);case 6:return r=e.sent,e.next=9,r.unlock(null,86400);case 9:window.dcp.wallet.add(r),window.dcp.compute.mine(4),p.enable(),n&&(n.innerText=parseFloat(n.innerText)+1),e.next=19;break;case 15:window.dcp.compute.stopMining(),p.disable(),t("ready"),n&&(n.innerText=parseFloat(n.innerText)-1);case 19:case"end":return e.stop()}}),e)}))),[c,t]);return r.a.createElement("button",{className:"btn btn-".concat(c?"outline-":"","success"),onClick:d,style:{width:"100px"}},c?"Pause":"Start")},b=a(10),v=["#e8bc14","#c0ab10","#87930b","#587f07","#367104","#146300"],h=function(e){var t=e.worker,a=e.index,o=e.incrementWorkerCount,c=e.decrementWorkerCount,l=Object(n.useState)(t.isWorking),i=Object(s.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)({indeterminate:!0,val:t.progress||0}),p=Object(s.a)(d,2),f=p[0],b=p[1],h=Object(n.useState)(t.public||{}),w=Object(s.a)(h,2)[1];Object(n.useEffect)((function(){var e=function(e){var t=e.job;m(!0),b({indeterminate:!1,val:0}),w(t),o()},a=function(){m(!1),c()},n=function(e){if(e.isIndeterminate){var t=Math.round(Math.random()*v.length);b({indeterminate:!0,val:t})}else b({indeterminate:!1,val:e.progress})};return t.on("sliceStart",e),t.on("sliceEnd",a),t.on("sliceProgress",n),function(){t.off("sliceStart",e),t.off("sliceEnd",a),t.off("sliceProgress",n)}}),[c,o,t]);var g=Object(n.useCallback)((function(e){return r.a.createElement("div",{className:"w-100 position-relative",style:{height:"4px",backgroundColor:"#E5E7E7"}},r.a.createElement("div",{className:"position-absolute",style:{top:0,bottom:0,left:0,width:"".concat(e.val,"%"),transition:"width 0.1s ease",backgroundColor:"#146300"}}))}),[]),E=Object(n.useCallback)((function(e){return r.a.createElement("div",{className:"position-relative",style:{height:"25px",backgroundColor:"white",width:"100px"}},v.map((function(t,a){var n=a<e.val?t:"white",o="white"===n?v.length-a:a,c="".concat(.1*o,"s");return r.a.createElement("div",{key:a,className:"position-absolute",style:{top:0,bottom:0,left:"".concat(100*a/v.length,"%"),backgroundColor:n,transitionProperty:"background-color",transitionDelay:c,width:"calc(".concat(100/v.length,"% - 8px)")}})})))}),[]);return u&&r.a.createElement("div",{className:"worker-status"},r.a.createElement("p",null,"Worker ",a+1," "),f.indeterminate?E(f):g(f))},w=function(e){var t=e.updateStatus,a=e.statusText,o=Object(n.useState)([]),c=Object(s.a)(o,2),l=c[0],i=c[1],u=Object(n.useState)(0),m=Object(s.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),v=Object(s.a)(f,2),w=v[0],g=v[1];Object(n.useEffect)((function(){var e=function(e){g(!0),i((function(t){return[].concat(Object(b.a)(t),[e])})),e.on("workerStop",(function(){i((function(t){return t.filter((function(t){return t!==e}))}))}))},t=function(){console.log("worker progressbars on start called"),g(!0)},a=function(){console.log("on stop called"),g(!1)};return window.dcp.compute.supervisor.on("sandboxStart",e),window.dcp.compute.supervisor.on("start",t),window.dcp.compute.supervisor.on("stop",a),function(){window.dcp.compute.supervisor.off("sandboxStart",e),window.dcp.compute.supervisor.off("start",t),window.dcp.compute.supervisor.off("stop",a)}}),[]);var E=Object(n.useCallback)((function(){p(d+1)}),[d]),k=Object(n.useCallback)((function(){p(d-1)}),[d]);return Object(n.useEffect)((function(){t(w?0===d?"waiting":"computing":"ready")}),[d,w,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"border p-3 m-0 mt-3",style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"}},r.a.createElement("div",{className:"status-area"},r.a.createElement("span",{className:"font-weight-bold mr-2"},"Status"),r.a.createElement("span",{id:"compute-status-span"},a)),r.a.createElement("div",{className:"status-area"},r.a.createElement("span",{className:"font-weight-bold mr-2"},"Task"),r.a.createElement("span",null,"COVID-19 Mapping"))),l.map((function(e,t){return r.a.createElement(h,{worker:e,key:e.id,index:t,incrementWorkerCount:E,decrementWorkerCount:k})})))},g=a(9),E=function(){var e={fetchFunc:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://covid19-scheduler.distributed.computer/scheduler/status5m.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),initialState:{},delay:1e4},t=Object(g.a)(e);return r.a.createElement("div",{id:"stats-summary"},r.a.createElement("p",{style:{fontWeight:"bold"}},"Status"),r.a.createElement("p",{style:{margin:0,fontSize:"0.9em"}},"(Updates every 5 minutes)"),r.a.createElement("div",{className:"console"},!t.worker&&"Loading stats from network ...",t.worker&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Tasks on Network: ",t.worker.distSlices),r.a.createElement("p",null,"COVID-19 Fighters: ",r.a.createElement("span",{id:"fighters-count"},t.uniqueIds)))))},k=function(){return r.a.createElement("svg",{className:"header-logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 525.31 595.71",height:55,width:50},r.a.createElement("polygon",{style:{fill:"#00a473"},points:"525.31 0 477.51 535.04 262.66 595.71 47.8 535.04 0 0 525.31 0"}),r.a.createElement("polygon",{style:{fill:"#6fc495"},points:"263.22 550.28 437.81 500.9 478.2 41.79 263.22 41.79 263.22 550.28"}),r.a.createElement("polygon",{style:{fill:"#ffde17"},points:"263.22 482.62 263.22 482.75 263.44 482.68 263.22 482.62"}),r.a.createElement("polygon",{style:{fill:"#ffde17"},points:"263.22 412.67 263.22 412.8 263.44 412.73 263.22 412.67"}),r.a.createElement("polygon",{style:{fill:"#fff"},points:"433.4 110.39 421.2 247.9 353.66 247.9 359.89 177.67 262.87 177.67 262.87 110.39 433.4 110.39"}),r.a.createElement("polygon",{style:{fill:"#fff"},points:"341.48 341.15 409.02 341.15 399.92 443.65 262.96 482.62 262.96 412.8 262.96 412.67 337 391.61 341.48 341.15"}),r.a.createElement("polygon",{style:{fill:"#e5e7e7"},points:"262.87 110.39 262.87 177.67 169.27 177.67 188.48 391.61 262.74 412.73 262.96 412.8 262.96 482.62 262.74 482.68 125.56 443.65 95.76 110.39 262.87 110.39"}))},y=function(e){var t=e.className;return r.a.createElement("div",{className:"d-flex align-items-center ".concat(t)},r.a.createElement("div",{className:"header-logo-wrapper"},r.a.createElement(k,null)),r.a.createElement("h3",{className:"logo-heading"},"Distributed.Computer"))},x=function(e){return e.open?r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"})):r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))},O=[{label:"Home",href:"https://covid19.distributed.computer"},{label:"Researcher",href:"https://covid19.apps.distributed.computer"},{label:"Worker",href:"https://dcp.work/covid19"}],j=function(e){var t=e.activeLink,a=e.hideDivider,o=void 0!==a&&a,c=Object(n.useState)(!1),l=Object(s.a)(c,2),i=l[0],u=l[1],m=Object(n.useCallback)((function(){u((function(e){return!e}))}),[u]);return r.a.createElement("header",{className:"main-header"},r.a.createElement("nav",{className:"navbar navbar-expand-lg"},r.a.createElement(y,{className:""}),r.a.createElement("button",{className:"navbar-toggler",onClick:m,type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement(x,{open:i})),r.a.createElement("div",{className:"collapse navbar-collapse ".concat(i?"show":""),id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},O.map((function(e){var a=e.label,n=e.href;return r.a.createElement("li",{key:a,className:"nav-item"},r.a.createElement("a",{href:n,className:"nav-link header-link ".concat(t===a?"active":"")},a))}))))),!o&&r.a.createElement("div",{className:"colored-divider"}))},N=function(){var e=Object(n.useState)(),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useCallback)((function(e){switch(e){case"ready":o("Ready to Compute");break;case"waiting":o("Waiting for tasks ...");break;case"computing":o("Computing ...");break;default:throw new Error("Update status to one of three special values. Look at the code!")}}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{activeLink:"Worker"}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-12 col-lg-5 order-2"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("img",{src:"https://dcp-covid19.github.io/logo.svg",alt:"dcp-covid19 logo"}),r.a.createElement("h4",{className:"mb-1 ml-2"},"COVID-19 Mapping")),r.a.createElement("small",null,"Join the fight against ",r.a.createElement("span",{className:"text-green"},"COVID-19")),r.a.createElement(E,null),r.a.createElement("p",{style:{fontWeight:"bold"}},"Project Objective:"),r.a.createElement("p",null,"To better inform remediation strategies and public health interventions against COVID-19 for municipalities, provincial/federal authorities by mapping transmission patterns of diseases based on reports from epidemiologists and transportation data."),r.a.createElement("p",null,"The resulting micro-picture will inform community-specific public health interventions to maximize recovery and minimize economic impacts. This is a platform open to all epidemiologists."),r.a.createElement("p",{className:"font-weight-bold pt-4"},"How DCP speeds up COVID-19 mapping with your computing power"),r.a.createElement("p",null,"Space-time patterns of spread span multiple scales due to complex disease ecological processes and biases from surveillance data generated from multi-jurisdictions with different sampling protocols requires a tremendous amount of computing power."),r.a.createElement("p",null,"The Distributed Compute Protocol (DCP) distributes computational workload across any device, anywhere, in order to speed up the overall computation. Many hands (computers) make light work!"),r.a.createElement("a",{href:"https://distributed.computer",target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline-success mt-4"},"Learn More")))),r.a.createElement("div",{className:"col-12 col-lg-7 p-3 order-lg-12 order-1"},r.a.createElement("h3",{className:"mb-4"},"Compute for ",r.a.createElement("span",{className:"text-green"},"COVID-19")),r.a.createElement(f,{updateStatus:c}),r.a.createElement(w,{updateStatus:c,statusText:a})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.dcp.compute.paymentAddress="0xEf5E3EeCc782F63317dD4e4CaDAF3B37A80F99EB",c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.cf918b36.chunk.js.map